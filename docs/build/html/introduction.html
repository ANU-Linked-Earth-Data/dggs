

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Introduction &mdash; rHEALPixDGGS 0.5.1 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.5.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="rHEALPixDGGS 0.5.1 documentation" href="index.html" />
    <link rel="next" title="The utils Module" href="utils.html" />
    <link rel="prev" title="Welcome the rHEALPixDGGS documentation!" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="utils.html" title="The utils Module"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome the rHEALPixDGGS documentation!"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">rHEALPixDGGS 0.5.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="introduction">
<h1>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h1>
<p>rHEALPixDGGS is a Python 3.3 package that implements the rHEALPix discrete global grid system (DGGS).
This documentation assumes you are familiar with the rHEALPix DGGS as described in <a class="reference internal" href="#grs2013">[GRS2013]</a> and familiar with basic Python 3.3 usage as described in <a class="reference external" href="http://docs.python.org/3/tutorial/">The Python Tutorial</a>.</p>
<table class="docutils citation" frame="void" id="grs2013" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[GRS2013]</td><td><em>(<a class="fn-backref" href="#id1">1</a>, <a class="fn-backref" href="#id2">2</a>)</em> Robert Gibb, Alexander Raichev, Michael Speth, <a class="reference external" href="http://code.scenzgrid.org/index.php/p/scenzgrid-py/source/tree/master/rHEALPixDGGS-0.5/docs/rhealpix_dggs_preprint.pdf">The rHEALPix discrete global grid system</a>, in preparation, 2013.</td></tr>
</tbody>
</table>
<div class="section" id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="http://python.org/">Python &gt;=3.3</a></li>
<li><a class="reference external" href="http://www.numpy.org/">NumPy &gt;=1.7</a> Base N-dimensional array package</li>
<li><a class="reference external" href="http://www.scipy.org/">SciPy &gt;=0.12</a> Fundamental library for scientific computing</li>
<li><a class="reference external" href="http://matplotlib.org/">Matplotlib &gt;=1.2.1</a> Comprehensive 2D Plotting</li>
<li><a class="reference external" href="http://code.google.com/p/pyproj/">Pyproj &gt;=1.9.3</a>
Python interface to the PROJ.4 cartographic library</li>
<li><a class="reference external" href="http://www.sagemath.org">Sage &gt;=5.10</a>
(Optional) Comprehensive mathematics package.
Needed only for a few optional graphics methods.
To use the optional graphics methods, start a Sage notebook session and import/attach the Python module that contains the methods.
For examples, see the Sage worksheet <tt class="docutils literal"><span class="pre">rhealpix_dggs/tests/test_dggs.sws</span></tt>.</li>
</ul>
</div>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>rHEALPixDGGS is available for download at Landcare Research&#8217;s git repository <a class="reference external" href="http://code.scenzgrid.org/index.php/p/scenzgrid-py/source/tree/master/rHEALPixDGGS-0.5">http://code.scenzgrid.org/index.php/p/scenzgrid-py/source/tree/master/rHEALPixDGGS-0.5</a> and can be cloned via the command <tt class="docutils literal"><span class="pre">git</span> <span class="pre">clone</span> <span class="pre">git&#64;code.scenzgrid.org:scenzgrid-py.git</span></tt>.</p>
<p>To install Sage, download and install the appropriate binary file from <a class="reference external" href="http://www.sagemath.org">sagemath.org</a>.
Then install Pyproj within Sage by downloading the Pyproj source, changing to the Pyproj directory, starting a Sage shell via <tt class="docutils literal"><span class="pre">sage</span> <span class="pre">-sh</span></tt>, then typing <tt class="docutils literal"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">build</span></tt>, then <tt class="docutils literal"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">install</span></tt>.
If that doesn&#8217;t work, try again but first start in superuser mode via <tt class="docutils literal"><span class="pre">sudo</span> <span class="pre">su</span></tt>.</p>
</div>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p>To use rHEALPixDGGS after installing it, start a Python session in the directory where you downloaded the modules and import the modules.
Here are some examples.
For a list of all methods available, see the application programming interface (API) in the following chapters.</p>
<div class="section" id="using-the-ellipsoids-and-projection-wrapper-modules">
<h3>Using the <tt class="docutils literal"><span class="pre">ellipsoids</span></tt> and <tt class="docutils literal"><span class="pre">projection_wrapper</span></tt> Modules<a class="headerlink" href="#using-the-ellipsoids-and-projection-wrapper-modules" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">ellipsoids</span></tt> module implements functions and constants dealing with ellipsoids of revolution (which include spheres but not general triaxial ellipsoids).
For brevity hereafter, the word &#8216;ellipsoid&#8217; abbreviates &#8216;ellipsoid of revolution&#8217;.</p>
<p>The module <tt class="docutils literal"><span class="pre">projection_wrapper</span></tt> implements a wrapper for the map projections of ellipsoids defined in <tt class="docutils literal"><span class="pre">pj_healpix</span></tt>, <tt class="docutils literal"><span class="pre">pj_rhealpix</span></tt>, and Pyproj.</p>
<p>Currently <tt class="docutils literal"><span class="pre">projection_wrapper</span></tt> uses the HEALPix and rHEALPix projections
defined in <tt class="docutils literal"><span class="pre">pj_healpix</span></tt> and <tt class="docutils literal"><span class="pre">pj_rhealpix</span></tt> and <em>not</em> the buggy versions  defined in Pyproj 1.9.3 as <tt class="docutils literal"><span class="pre">PJ_healpix.c</span></tt>.
Alternatively, you can download a corrected version of <tt class="docutils literal"><span class="pre">PJ_healpix.c</span></tt> from
<a class="reference external" href="http://trac.osgeo.org/proj/changeset/2378">trac.osgeo.org/proj/changeset/2378</a>, rebuild Pyproj with it, and use it in <tt class="docutils literal"><span class="pre">dggs</span></tt> by editing the <tt class="docutils literal"><span class="pre">HOMEMADE_PROJECTIONS</span></tt> line in <tt class="docutils literal"><span class="pre">projection_wrapper</span></tt>.</p>
<p>Import all the classes, methods, and constants from the module:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">rhealpix_dggs.projection_wrapper</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
<p>Create an ellipsoid, say, one with major radius 5 and eccentricity 0.8:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">rhealpix_dggs.ellipsoids</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ellps_1</span> <span class="o">=</span> <span class="n">Ellipsoid</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">e</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">ellps_1</span><span class="p">)</span>
<span class="go">ellipsoid:</span>
<span class="go">    R_A = 4.32200117119</span>
<span class="go">    a = 5</span>
<span class="go">    b = 3.0</span>
<span class="go">    e = 0.8</span>
<span class="go">    f = 0.4</span>
<span class="go">    lat_0 = 0</span>
<span class="go">    lon_0 = 0</span>
<span class="go">    radians = False</span>
<span class="go">    sphere = False</span>
</pre></div>
</div>
<p>The names of the ellipsoid attributes agree with the names of the <a class="reference external" href="http://trac.osgeo.org/proj/wiki/GenParms">PROJ.4 ellipsoid parameters</a>.
For example, <tt class="docutils literal"><span class="pre">R_A</span></tt> is the authalic radius of the ellipsoid, the radius of the sphere that has the same area as the ellipsoid.</p>
<p>By default, angles are measured in degrees.
If you prefer radians, then do:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ellps_2</span> <span class="o">=</span> <span class="n">Ellipsoid</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">e</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span> <span class="n">radians</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">ellps_2</span><span class="p">)</span>
<span class="go">ellipsoid:</span>
<span class="go">    R_A = 4.32200117119</span>
<span class="go">    a = 5</span>
<span class="go">    b = 3.0</span>
<span class="go">    e = 0.8</span>
<span class="go">    f = 0.4</span>
<span class="go">    lat_0 = 0</span>
<span class="go">    lon_0 = 0</span>
<span class="go">    radians = True</span>
<span class="go">    sphere = False</span>
</pre></div>
</div>
<p>Some common ellipsoids are predefined as constants.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">UNIT_SPHERE</span><span class="p">)</span>
<span class="go">ellipsoid:</span>
<span class="go">    R = 1</span>
<span class="go">    R_A = 1</span>
<span class="go">    a = 1</span>
<span class="go">    b = 1</span>
<span class="go">    e = 0</span>
<span class="go">    f = 0</span>
<span class="go">    lat_0 = 0</span>
<span class="go">    lon_0 = 0</span>
<span class="go">    radians = False</span>
<span class="go">    sphere = True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">WGS84_ELLIPSOID</span><span class="p">)</span>
<span class="go">ellipsoid:</span>
<span class="go">    R_A = 6374581.4671</span>
<span class="go">    a = 6378137.0</span>
<span class="go">    b = 6356752.314140356</span>
<span class="go">    e = 0.0578063088401</span>
<span class="go">    f = 0.003352810681182</span>
<span class="go">    lat_0 = 0</span>
<span class="go">    lon_0 = 0</span>
<span class="go">    radians = False</span>
<span class="go">    sphere = False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">WGS84_ELLIPSOID_RADIANS</span><span class="p">)</span>
<span class="go">ellipsoid:</span>
<span class="go">    R_A = 6374581.4671</span>
<span class="go">    a = 6378137.0</span>
<span class="go">    b = 6356752.314140356</span>
<span class="go">    e = 0.0578063088401</span>
<span class="go">    f = 0.003352810681182</span>
<span class="go">    lat_0 = 0</span>
<span class="go">    lon_0 = 0</span>
<span class="go">    radians = True</span>
<span class="go">    sphere = False</span>
</pre></div>
</div>
<p>Ellipsoid instances are parametrized by geographic longitude and latitude with the central meridian at <tt class="docutils literal"><span class="pre">lon_0</span></tt> and the parallel of origin at <tt class="docutils literal"><span class="pre">lat_0</span></tt>.</p>
<p>Project some points of the ellipsoid using the HEALPix and rHEALPix projections:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">h</span> <span class="o">=</span> <span class="n">Proj</span><span class="p">(</span><span class="n">ellps_1</span><span class="p">,</span> <span class="s">&#39;healpix&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rh</span> <span class="o">=</span> <span class="n">Proj</span><span class="p">(</span><span class="n">ellps_1</span><span class="p">,</span> <span class="s">&#39;rhealpix&#39;</span><span class="p">,</span> <span class="n">north_square</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">south_square</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">h</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">60</span><span class="p">))</span>
<span class="go">(0.0, 3.351278550178026)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">rh</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">60</span><span class="p">))</span>
<span class="go">(0.0, 3.351278550178026)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">h</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">70</span><span class="p">))</span>
<span class="go">(0.864006732389895, 4.2584985144432679)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">rh</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">70</span><span class="p">))</span>
<span class="go">(-0.86400673238989445, 4.2584985144432679)</span>
</pre></div>
</div>
</div>
<div class="section" id="using-the-dggs-module">
<h3>Using the <tt class="docutils literal"><span class="pre">dggs</span></tt> Module<a class="headerlink" href="#using-the-dggs-module" title="Permalink to this headline">¶</a></h3>
<p>The module <tt class="docutils literal"><span class="pre">dggs</span></tt> implements the rHEALPix DGGS and various operations thereupon.</p>
<p>Import all the classes, methods, and constants from the module</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">rhealpix_dggs.dggs</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
<p>Create the (0, 0)-rHEALPix DGGS with N_side=3 that is based upon the WGS84 ellipsoid:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">rhealpix_dggs.ellipsoids</span> <span class="kn">import</span> <span class="n">WGS84_ELLIPSOID</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">E</span> <span class="o">=</span> <span class="n">WGS84_ELLIPSOID</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rdggs</span> <span class="o">=</span> <span class="n">RHEALPixDGGS</span><span class="p">(</span><span class="n">ellipsoid</span><span class="o">=</span><span class="n">E</span><span class="p">,</span> <span class="n">north_square</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">south_square</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">N_side</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">rdggs</span><span class="p">)</span>
<span class="go">rHEALPix DGGS:</span>
<span class="go">    N_side = 3</span>
<span class="go">    north_square = 0</span>
<span class="go">    south_square = 0</span>
<span class="go">    max_areal_resolution = 1</span>
<span class="go">    max_resolution = 15</span>
<span class="go">    ellipsoid:</span>
<span class="go">        R_A = 6374581.4671</span>
<span class="go">        a = 6378137.0</span>
<span class="go">        b = 6356752.314140356</span>
<span class="go">        e = 0.0578063088401</span>
<span class="go">        f = 0.003352810681182319</span>
<span class="go">        lat_0 = 0</span>
<span class="go">        lon_0 = 0</span>
<span class="go">        radians = False</span>
<span class="go">        sphere = False</span>
</pre></div>
</div>
<p>Some common rHEALPix DGGSs are predefined as constants:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">UNIT_003</span><span class="p">)</span>
<span class="go">rHEALPix DGGS:</span>
<span class="go">    N_side = 3</span>
<span class="go">    north_square = 0</span>
<span class="go">    south_square = 0</span>
<span class="go">    max_areal_resolution = 1</span>
<span class="go">    max_resolution = 1</span>
<span class="go">    ellipsoid:</span>
<span class="go">        R = 1</span>
<span class="go">        R_A = 1</span>
<span class="go">        a = 1</span>
<span class="go">        b = 1</span>
<span class="go">        e = 0</span>
<span class="go">        f = 0</span>
<span class="go">        lat_0 = 0</span>
<span class="go">        lon_0 = 0</span>
<span class="go">        radians = False</span>
<span class="go">        sphere = True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">WGS84_003</span><span class="p">)</span>
<span class="go">rHEALPix DGGS:</span>
<span class="go">    N_side = 3</span>
<span class="go">    north_square = 0</span>
<span class="go">    south_square = 0</span>
<span class="go">    max_areal_resolution = 1</span>
<span class="go">    max_resolution = 15</span>
<span class="go">    ellipsoid:</span>
<span class="go">        R_A = 6374581.4671</span>
<span class="go">        a = 6378137.0</span>
<span class="go">        b = 6356752.314140356</span>
<span class="go">        e = 0.0578063088401</span>
<span class="go">        f = 0.003352810681182319</span>
<span class="go">        lat_0 = 0</span>
<span class="go">        lon_0 = 0</span>
<span class="go">        radians = False</span>
<span class="go">        sphere = False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">UNIT_003_RADIANS</span><span class="p">)</span>
<span class="go">rHEALPix DGGS:</span>
<span class="go">    N_side = 3</span>
<span class="go">    north_square = 0</span>
<span class="go">    south_square = 0</span>
<span class="go">    max_areal_resolution = 1</span>
<span class="go">    max_resolution = 1</span>
<span class="go">    ellipsoid:</span>
<span class="go">        R = 1</span>
<span class="go">        R_A = 1</span>
<span class="go">        a = 1</span>
<span class="go">        b = 1</span>
<span class="go">        e = 0</span>
<span class="go">        f = 0</span>
<span class="go">        lat_0 = 0</span>
<span class="go">        lon_0 = 0</span>
<span class="go">        radians = True</span>
<span class="go">        sphere = True</span>
</pre></div>
</div>
<p>Pick a (longitude-latitude) point on the ellipsoid and find the level 1 cell that contains it</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">p</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">rdggs</span><span class="o">.</span><span class="n">cell_from_point</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">plane</span><span class="o">=</span><span class="bp">False</span><span class="p">);</span> <span class="k">print</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
<span class="go">Q0</span>
</pre></div>
</div>
<p>Find the ellipsoidal (edge) neighbors of this cell</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="p">(</span><span class="n">direction</span><span class="p">,</span> <span class="n">cell</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">neighbors</span><span class="p">(</span><span class="n">plane</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
<span class="gp">... </span>    <span class="k">print</span><span class="p">(</span><span class="n">direction</span><span class="p">,</span> <span class="n">cell</span><span class="p">)</span>
<span class="go">east Q1</span>
<span class="go">north N2</span>
<span class="go">south Q3</span>
<span class="go">west P2</span>
</pre></div>
</div>
<p>Find the planar (edge) neighbors of this cell</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="p">(</span><span class="n">direction</span><span class="p">,</span> <span class="n">cell</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">neighbors</span><span class="p">(</span><span class="s">&#39;plane&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
<span class="gp">... </span>    <span class="k">print</span><span class="p">(</span><span class="n">direction</span><span class="p">,</span> <span class="n">cell</span><span class="p">)</span>
<span class="go">down Q3</span>
<span class="go">left P2</span>
<span class="go">right Q1</span>
<span class="go">up N2</span>
</pre></div>
</div>
<p>Find all the level 1 cells intersecting the longitude-latitude aligned ellipsoidal quadrangle with given northwest and southeast corners</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">nw</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">45</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">se</span> <span class="o">=</span> <span class="p">(</span><span class="mi">90</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cells</span> <span class="o">=</span> <span class="n">rdggs</span><span class="o">.</span><span class="n">cells_from_region</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">nw</span><span class="p">,</span> <span class="n">se</span><span class="p">,</span> <span class="n">plane</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">cells</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">print</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">cell</span><span class="p">)</span> <span class="k">for</span> <span class="n">cell</span> <span class="ow">in</span> <span class="n">row</span><span class="p">])</span>
<span class="go">[&#39;N2&#39;, &#39;N1&#39;, &#39;N0&#39;]</span>
<span class="go">[&#39;Q0&#39;, &#39;Q1&#39;, &#39;Q2&#39;, &#39;R0&#39;]</span>
<span class="go">[&#39;Q3&#39;, &#39;Q4&#39;, &#39;Q5&#39;, &#39;R3&#39;]</span>
</pre></div>
</div>
<p>Compute the ellipsoidal shape and ellipsoidal nuclei of these cells</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">cells</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">for</span> <span class="n">cell</span> <span class="ow">in</span> <span class="n">row</span><span class="p">:</span>
<span class="gp">... </span>        <span class="k">print</span><span class="p">(</span><span class="n">cell</span><span class="p">,</span> <span class="n">cell</span><span class="o">.</span><span class="n">ellipsoidal_shape</span><span class="p">(),</span> <span class="n">cell</span><span class="o">.</span><span class="n">nucleus</span><span class="p">(</span><span class="n">plane</span><span class="o">=</span><span class="bp">False</span><span class="p">))</span>
<span class="go">N2 dart (5.0888874903416268e-14, 58.470677829627355)</span>
<span class="go">N1 skew_quad (45.000000000000036, 58.470677829627355)</span>
<span class="go">N0 dart (89.999999999999957, 58.470677829627363)</span>
<span class="go">Q0 quad (14.999999999999998, 26.438744923100096)</span>
<span class="go">Q1 quad (45.0, 26.438744923100096)</span>
<span class="go">Q2 quad (74.999999999999986, 26.438744923100096)</span>
<span class="go">R0 quad (105.00000000000001, 26.438744923100096)</span>
<span class="go">Q3 quad (14.999999999999998, 3.560649871414923e-15)</span>
<span class="go">Q4 quad (45.0, 3.560649871414923e-15)</span>
<span class="go">Q5 quad (74.999999999999986, 3.560649871414923e-15)</span>
<span class="go">R3 quad (105.00000000000001, 3.560649871414923e-15)</span>
</pre></div>
</div>
<p>Create the (0, 0)-rHEALPix DGGS with N_side = 3 that is based on the WGS84 ellipsoid.
Orient the DGGS so that the planar origin (0, 0) is on Auckland, New Zealand:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">p</span> <span class="o">=</span> <span class="p">(</span><span class="mi">174</span><span class="p">,</span> <span class="o">-</span><span class="mi">37</span><span class="p">)</span>  <span class="c"># Approximate Auckland lon-lat coordinates</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">rhealpix_dggs.projection_wrapper</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">E</span> <span class="o">=</span> <span class="n">Ellipsoid</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="n">WGS84_A</span><span class="p">,</span> <span class="n">f</span><span class="o">=</span><span class="n">WGS84_F</span><span class="p">,</span> <span class="n">radians</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">lon_0</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">lat_0</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rdggs</span> <span class="o">=</span> <span class="n">RHEALPixDGGS</span><span class="p">(</span><span class="n">E</span><span class="p">,</span> <span class="n">N_side</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">north_square</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">south_square</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">rdggs</span><span class="p">)</span>
<span class="go">rHEALPix DGGS:</span>
<span class="go">    N_side = 3</span>
<span class="go">    north_square = 0</span>
<span class="go">    south_square = 0</span>
<span class="go">    max_areal_resolution = 1</span>
<span class="go">    max_resolution = 15</span>
<span class="go">    ellipsoid:</span>
<span class="go">        R_A = 6374581.4671</span>
<span class="go">        a = 6378137.0</span>
<span class="go">        b = 6356752.314140356</span>
<span class="go">        e = 0.0578063088401</span>
<span class="go">        f = 0.003352810681182319</span>
<span class="go">        lat_0 = -37</span>
<span class="go">        lon_0 = 174</span>
<span class="go">        radians = False</span>
<span class="go">        sphere = False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">rdggs</span><span class="o">.</span><span class="n">cell_from_point</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">plane</span><span class="o">=</span><span class="bp">False</span><span class="p">))</span>
<span class="go">Q3</span>
</pre></div>
</div>
</div>
<div class="section" id="using-the-distortion-module">
<h3>Using the <tt class="docutils literal"><span class="pre">distortion</span></tt> Module<a class="headerlink" href="#using-the-distortion-module" title="Permalink to this headline">¶</a></h3>
<p>The module <tt class="docutils literal"><span class="pre">distortion</span></tt> computes distortions of map projections created via <tt class="docutils literal"><span class="pre">projection_wrapper</span></tt> and was used to produce the tables in <a class="reference internal" href="#grs2013">[GRS2013]</a>.
The module is not necessary for manipulating the rHEALPix DGGS.</p>
<p>Import all the classes, methods, and constants from the module:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">rhealpix_dggs.distortion</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
<p>Import the WGS84 ellipsoid, define the rHEALPix projection on the ellipsoid, and compute linear distortion and areal distortion for the projection at a given point:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">rhealpix_dggs.ellipsoids</span> <span class="kn">import</span> <span class="n">WGS84_ELLIPSOID</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">E</span> <span class="o">=</span> <span class="n">WGS84_ELLIPSOID</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">rhealpix_dggs.projection_wrapper</span> <span class="kn">import</span> <span class="n">Proj</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">Proj</span><span class="p">(</span><span class="n">ellipsoid</span><span class="o">=</span><span class="n">E</span><span class="p">,</span> <span class="n">proj</span><span class="o">=</span><span class="s">&#39;rhealpix&#39;</span><span class="p">,</span> <span class="n">north_square</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">south_square</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">distortion</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="o">*</span><span class="n">p</span><span class="p">)</span>  <span class="c"># First entry of output is f(*p)) </span>
<span class="go">((0.0, 3748655.115049511), 6.976075406932126, 1.1295629192757011, 1.1780969079183845)</span>
</pre></div>
</div>
<p>Sample 100 random points from the WGS84 ellipsoid and compute the sample minimum, sample maximum, sample median, sample mean, and sample standard deviation of the linear and area distortion functions of the rHEALPix projection of those points:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">sample</span> <span class="o">=</span> <span class="p">[</span><span class="n">E</span><span class="o">.</span><span class="n">random_point</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">distortion_stats</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">sample</span><span class="p">)[</span><span class="mi">1</span><span class="p">])</span>  
<span class="go">[[14.918, 13.82, 0.124, 48.086, 8.623], [1.345, 0.371, 1.002, 2.375, 1.163], [1.178, 0.0, 1.178, 1.178, 1.178]]</span>
</pre></div>
</div>
<p>Do the same for 100 points chosen at random from an rHEALPix DGGS dart cell:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">rhealpix_dggs.dggs</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rdggs</span> <span class="o">=</span> <span class="n">WGS84_003</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cell</span> <span class="o">=</span> <span class="n">rdggs</span><span class="o">.</span><span class="n">cell</span><span class="p">([</span><span class="s">&#39;N&#39;</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sample</span> <span class="o">=</span> <span class="p">[</span><span class="n">cell</span><span class="o">.</span><span class="n">random_point</span><span class="p">(</span><span class="n">plane</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">distortion_stats</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">sample</span><span class="p">)[</span><span class="mi">1</span><span class="p">])</span>  
<span class="go">[[38.907, 6.044, 28.189, 48.963, 38.701], [2.013, 0.226, 1.644, 2.415, 1.991], [1.178, 0.0, 1.178, 1.178, 1.178]]</span>
</pre></div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Introduction</a><ul>
<li><a class="reference internal" href="#requirements">Requirements</a></li>
<li><a class="reference internal" href="#installation">Installation</a></li>
<li><a class="reference internal" href="#usage">Usage</a><ul>
<li><a class="reference internal" href="#using-the-ellipsoids-and-projection-wrapper-modules">Using the <tt class="docutils literal"><span class="pre">ellipsoids</span></tt> and <tt class="docutils literal"><span class="pre">projection_wrapper</span></tt> Modules</a></li>
<li><a class="reference internal" href="#using-the-dggs-module">Using the <tt class="docutils literal"><span class="pre">dggs</span></tt> Module</a></li>
<li><a class="reference internal" href="#using-the-distortion-module">Using the <tt class="docutils literal"><span class="pre">distortion</span></tt> Module</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Welcome the rHEALPixDGGS documentation!</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="utils.html"
                        title="next chapter">The utils Module</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/introduction.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="utils.html" title="The utils Module"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome the rHEALPixDGGS documentation!"
             >previous</a> |</li>
        <li><a href="index.html">rHEALPixDGGS 0.5.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, Alexander Raichev.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>